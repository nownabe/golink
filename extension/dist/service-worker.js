(()=>{let e="golinkUrl";async function t(e){console.log(`Updating redirect rule to ${e}`);let t=new URL(e).host;await chrome.declarativeNetRequest.updateDynamicRules({removeRuleIds:[1],addRules:[{id:1,priority:1,action:{type:"redirect",redirect:{transform:{scheme:"https",host:t}}},condition:{urlFilter:"*://go/*",resourceTypes:["main_frame"]}}]})}async function n(){let n=(await chrome.storage.sync.get(e))[e];await t(n),chrome.storage.onChanged.addListener(async(n,a)=>{"sync"===a&&e in n&&(console.log("Golink URL changed",n[e].newValue),await t(n[e].newValue))})}chrome.runtime.onInstalled.addListener(n)})();
//# sourceMappingURL=service-worker.js.map
